{
  "version": 3,
  "sources": ["../../@langchain/langgraph-sdk/dist/react-ui/client.js", "../../@langchain/langgraph-sdk/dist/react-ui/types.js", "../../@langchain/langgraph-sdk/dist/react-ui/index.js"],
  "sourcesContent": ["\"use client\";\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useStream } from \"../react/index.js\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport * as JsxRuntime from \"react/jsx-runtime\";\nconst UseStreamContext = React.createContext(null);\nexport function useStreamContext() {\n    const ctx = React.useContext(UseStreamContext);\n    if (!ctx) {\n        throw new Error(\"useStreamContext must be used within a LoadExternalComponent\");\n    }\n    return new Proxy(ctx, {\n        get(target, prop) {\n            if (prop === \"meta\")\n                return target.meta;\n            return target.stream[prop];\n        },\n    });\n}\nclass ComponentStore {\n    constructor() {\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"boundCache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n    }\n    respond(shadowRootId, comp, targetElement) {\n        this.cache[shadowRootId] = { comp, target: targetElement };\n        this.callbacks[shadowRootId]?.forEach((c) => c(comp, targetElement));\n    }\n    getBoundStore(shadowRootId) {\n        this.boundCache[shadowRootId] ??= {\n            subscribe: (onStoreChange) => {\n                this.callbacks[shadowRootId] ??= [];\n                this.callbacks[shadowRootId].push(onStoreChange);\n                return () => {\n                    this.callbacks[shadowRootId] = this.callbacks[shadowRootId].filter((c) => c !== onStoreChange);\n                };\n            },\n            getSnapshot: () => this.cache[shadowRootId],\n        };\n        return this.boundCache[shadowRootId];\n    }\n}\nconst COMPONENT_STORE = new ComponentStore();\nconst EXT_STORE_SYMBOL = Symbol.for(\"LGUI_EXT_STORE\");\nconst REQUIRE_SYMBOL = Symbol.for(\"LGUI_REQUIRE\");\nexport function LoadExternalComponent({ stream, message, meta, fallback, components, ...props }) {\n    const ref = React.useRef(null);\n    const id = React.useId();\n    const shadowRootId = `child-shadow-${id}`;\n    const store = React.useMemo(() => COMPONENT_STORE.getBoundStore(shadowRootId), [shadowRootId]);\n    const state = React.useSyncExternalStore(store.subscribe, store.getSnapshot);\n    const clientComponent = components?.[message.name];\n    const hasClientComponent = clientComponent != null;\n    const uiClient = stream.client[\"~ui\"];\n    React.useEffect(() => {\n        if (hasClientComponent)\n            return;\n        uiClient.getComponent(stream.assistantId, message.name).then((html) => {\n            const dom = ref.current;\n            if (!dom)\n                return;\n            const root = dom.shadowRoot ?? dom.attachShadow({ mode: \"open\" });\n            const fragment = document\n                .createRange()\n                .createContextualFragment(html.replace(\"{{shadowRootId}}\", shadowRootId));\n            root.appendChild(fragment);\n        });\n    }, [\n        uiClient,\n        stream.assistantId,\n        message.name,\n        shadowRootId,\n        hasClientComponent,\n    ]);\n    if (hasClientComponent) {\n        return React.createElement(clientComponent, message.props);\n    }\n    return (_jsxs(_Fragment, { children: [_jsx(\"div\", { id: shadowRootId, ref: ref, ...props }), _jsx(UseStreamContext.Provider, { value: { stream, meta }, children: state?.target != null\n                    ? ReactDOM.createPortal(React.createElement(state.comp, message.props), state.target)\n                    : fallback })] }));\n}\nexport function bootstrapUiContext() {\n    if (typeof window === \"undefined\") {\n        console.warn(\"Attempting to bootstrap UI context outside of browser environment. \" +\n            \"Avoid importing from `@langchain/langgraph-sdk/react-ui` in server context.\");\n        return;\n    }\n    window[EXT_STORE_SYMBOL] = COMPONENT_STORE;\n    window[REQUIRE_SYMBOL] = (name) => {\n        if (name === \"react\")\n            return React;\n        if (name === \"react-dom\")\n            return ReactDOM;\n        if (name === \"react/jsx-runtime\")\n            return JsxRuntime;\n        if (name === \"@langchain/langgraph-sdk/react\")\n            return { useStream };\n        if (name === \"@langchain/langgraph-sdk/react-ui\") {\n            return {\n                useStreamContext,\n                LoadExternalComponent: () => {\n                    throw new Error(\"Nesting LoadExternalComponent is not supported\");\n                },\n            };\n        }\n        throw new Error(`Unknown module...: ${name}`);\n    };\n}\n", "export function uiMessageReducer(state, update) {\n    const events = Array.isArray(update) ? update : [update];\n    let newState = state.slice();\n    for (const event of events) {\n        if (event.type === \"remove-ui\") {\n            newState = newState.filter((ui) => ui.id !== event.id);\n            continue;\n        }\n        const index = state.findIndex((ui) => ui.id === event.id);\n        if (index !== -1) {\n            newState[index] = event;\n        }\n        else {\n            newState.push(event);\n        }\n    }\n    return newState;\n}\n", "import { bootstrapUiContext } from \"./client.js\";\nbootstrapUiContext();\nexport { useStreamContext, LoadExternalComponent } from \"./client.js\";\nexport { uiMessageReducer, } from \"./types.js\";\n"],
  "mappings": "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",
  "names": ["_a", "_jsxs", "_Fragment", "_jsx"]
}
